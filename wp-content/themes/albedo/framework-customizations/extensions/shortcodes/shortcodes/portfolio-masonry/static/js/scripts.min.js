!function(a){"use strict";function t(t){var n=a("#"+t),e=parseInt(n.data("grid-margins"))/2;n.find(".grid-item").css("padding",e+"px"),n.css("margin-left",-e+"px"),n.css("margin-right",-e+"px"),n.css("margin-top",-e+"px"),new AnimOnScroll(document.getElementById(t),{minDuration:.4,maxDuration:.7,viewportFactor:.2})}function n(n,e,i,o,s,r){a.ajax({url:wprotoEngineVars.ajaxurl,type:"POST",dataType:"json",data:{action:"wplab_albedo_ajax_query_posts",query_type:"load_more",atts:n.data("atts"),paged:o},beforeSend:function(){n.addClass("loading"),e.addClass("loading")},success:function(a){i.append(a.html),t(i.attr("id")),n.removeClass("loading"),e.removeClass("loading"),n.data("next-page",a.next_page),s>r&&n.hide()}})}window.albedo_portfolio_masonry_init=function(){a(".portfolio-masonry-shortcode").each(function(){var e=a(this),i=e.find("ul.grid").attr("id"),o=a("#"+i),s=e.find(".posts-filters a");t(i),s.click(function(){if(e.hasClass("loading"))return!1;s.removeClass("current");var n=a(this),r=n.parent(),d=e.find(".ajax-pagination-button, .pagination.style-infinite");return n.addClass("current"),a.ajax({url:wprotoEngineVars.ajaxurl,type:"POST",dataType:"json",data:{action:"wplab_albedo_ajax_query_posts",query_type:"filter",term:n.data("term"),atts:r.data("atts")},beforeSend:function(){e.addClass("loading"),a.each(o.find(".item"),function(t,n){setTimeout(function(){a(n).addClass("fadeOut animated")},150*t)})},success:function(a){o.html(a.html),e.removeClass("loading"),t(i),d.data("next-page",a.next_page).data("max-pages",a.max_pages).data("atts",a.atts),a.next_page>a.max_pages?d.hide():d.show()}}),!1}),e.find(".ajax-pagination-button").click(function(){if(e.hasClass("loading"))return!1;var t=a(this),i=parseInt(t.data("max-pages")),s=parseInt(t.data("next-page")),r=s+1;return t.data("next-page",r),n(t,e,o,s,r,i),!1});var r=e.find(".pagination.style-infinite");r.length&&o.waitForImages({waitForAll:!0,finished:function(){var t=r.offset().top-a(window).height();a(window).scroll(function(){var i=parseInt(r.data("max-pages")),s=parseInt(r.data("next-page")),d=s+1;a(window).scrollTop()>=t&&0==r.hasClass("loading")&&s<=i&&n(r,e,o,s,d,i)})}})})},window.albedo_portfolio_masonry_init()}(window.jQuery);
