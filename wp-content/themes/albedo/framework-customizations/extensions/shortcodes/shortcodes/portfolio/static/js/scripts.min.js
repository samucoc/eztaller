!function(a){"use strict";function t(a,t,e,n,i){a.justifiedGallery({rowHeight:parseInt(t),maxRowHeight:parseInt(e),lastRow:"nojustify",margins:parseInt(n),border:0,captions:window.themeFrontCore.stringToBoolean(i),randomize:!1,cssAnimation:!0,selector:"article",captionSettings:{animationDuration:500,visibleOpacity:.7,nonVisibleOpacity:0}})}function e(t,e,n,i,o,s,d){a.ajax({url:wprotoEngineVars.ajaxurl,type:"POST",dataType:"json",data:{action:"wplab_albedo_ajax_query_posts",query_type:"load_more",atts:t.data("atts"),paged:o},beforeSend:function(){t.addClass("loading"),n.addClass("loading")},success:function(o){a("#wplab_albedo_temp_div").length||a("body").append('<div style="display: none;" id="wplab_albedo_temp_div"></div>');var r=a("#wplab_albedo_temp_div");r.append(o.html),r.find(".item").css("opacity","0").addClass("new-item"),e.append(r.html()),r.remove(),t.removeClass("loading"),n.removeClass("loading"),i.justifiedGallery("norewind"),t.data("next-page",o.next_page),s>d&&t.hide(),a.each(e.find(".new-item"),function(t,e){setTimeout(function(){a(e).addClass("fadeIn animated")},150*t)})}})}window.wplab_albedo_portfolio_init=function(){var n=a(".portfolio-shortcode");n.length&&n.each(function(){var i=a(this),o=i.find(".justified-gallery"),s=i.find(".posts-filters a"),d=o.data("grid-row-height"),r=o.data("grid-row-max-height"),l=o.data("grid-margins"),p=o.data("grid-captions");t(o,d,r,l,p),s.click(function(){if(n.hasClass("loading"))return!1;n.addClass("loading"),s.removeClass("current");var e=a(this),i=e.parent(),c=a("#"+i.data("target-id")),f=n.find(".ajax-pagination-button, .pagination.style-infinite");return e.addClass("current"),a.ajax({url:wprotoEngineVars.ajaxurl,type:"POST",dataType:"json",data:{action:"wplab_albedo_ajax_query_posts",query_type:"filter",term:e.data("term"),atts:i.data("atts")},beforeSend:function(){a.each(c.find(".item"),function(t,e){setTimeout(function(){a(e).addClass("fadeOut animated")},150*t)})},success:function(e){c.html(e.html),c.find(".item").css("opacity","0"),t(o,d,r,l,p),n.removeClass("loading"),f.data("next-page",e.next_page).data("max-pages",e.max_pages).data("atts",e.atts),e.next_page>e.max_pages?f.hide():f.show(),a.each(c.find(".item"),function(t,e){setTimeout(function(){a(e).addClass("fadeIn animated")},150*t)})}}),!1});var c=i.find(".pagination.style-infinite");c.length&&n.waitForImages({waitForAll:!0,finished:function(){var t=a("#"+c.data("posts-container-id")),i=c.offset().top-a(window).height();a(window).scroll(function(){var s=parseInt(c.data("max-pages")),d=parseInt(c.data("next-page")),r=d+1;a(window).scrollTop()>=i&&0==c.hasClass("loading")&&d<=s&&e(c,t,n,o,d,r,s)})}}),i.find(".ajax-pagination-button").click(function(){if(n.hasClass("loading"))return!1;var t=a(this),i=a("#"+t.data("posts-container-id")),s=parseInt(t.data("max-pages")),d=parseInt(t.data("next-page")),r=d+1;return t.data("next-page",r),e(t,i,n,o,d,r,s),!1})})},window.wplab_albedo_portfolio_init()}(window.jQuery);
