!function(a){"use strict";function o(a){a.find(".lightbox-link").lightGallery({mode:wplabAlbedoPortfolioMasonryGrid.lightboxEffect,cssEasing:"cubic-bezier("+wplabAlbedoPortfolioMasonryGrid.lightboxEasing+")",download:window.themeFrontCore.stringToBoolean(wplabAlbedoPortfolioMasonryGrid.lightboxDownload),zoom:window.themeFrontCore.stringToBoolean(wplabAlbedoPortfolioMasonryGrid.lightboxZoom),fullScreen:window.themeFrontCore.stringToBoolean(wplabAlbedoPortfolioMasonryGrid.lightboxFullscreen),autoplay:window.themeFrontCore.stringToBoolean(wplabAlbedoPortfolioMasonryGrid.lightboxAutoplay),thumbnail:window.themeFrontCore.stringToBoolean(wplabAlbedoPortfolioMasonryGrid.lightboxThumbs),getCaptionFromTitleOrAlt:window.themeFrontCore.stringToBoolean(wplabAlbedoPortfolioMasonryGrid.lightboxCaptions),progressBar:!1,autoplayControls:!0,pause:parseInt(wplabAlbedoPortfolioMasonryGrid.lightboxAutoplaySpeed),selector:"this"})}function t(o){var t=a("#"+o),n=parseInt(t.data("grid-margins"))/2;t.find(".grid-item").css("padding",n+"px"),t.css("margin-left",-n+"px"),t.css("margin-right",-n+"px"),t.css("margin-top",-n+"px"),new AnimOnScroll(document.getElementById(o),{minDuration:.4,maxDuration:.7,viewportFactor:.2})}function n(n,i,e,s,r,l){a.ajax({url:wprotoEngineVars.ajaxurl,type:"POST",dataType:"json",data:{action:"wplab_albedo_ajax_query_posts",query_type:"load_more",atts:n.data("atts"),paged:s},beforeSend:function(){n.addClass("loading"),i.addClass("loading")},success:function(a){e.append(a.html),t(e.attr("id")),i.hasClass("with-lightbox")&&o(i),n.removeClass("loading"),i.removeClass("loading"),n.data("next-page",a.next_page),r>l&&n.hide()}})}window.wplab_albedo_portfolio_posts_init=function(){a(".portfolio-masonry-grid-shortcode").each(function(){var i=a(this),e=i.find("ul.grid").attr("id"),s=a("#"+e),r=i.find(".posts-filters a");t(e),i.hasClass("with-lightbox")&&o(i),r.click(function(){if(i.hasClass("loading"))return!1;r.removeClass("current");var n=a(this),l=n.parent(),d=i.find(".ajax-pagination-button, .pagination.style-infinite");return n.addClass("current"),a.ajax({url:wprotoEngineVars.ajaxurl,type:"POST",dataType:"json",data:{action:"wplab_albedo_ajax_query_posts",query_type:"filter",term:n.data("term"),atts:l.data("atts")},beforeSend:function(){i.addClass("loading"),a.each(s.find(".item"),function(o,t){setTimeout(function(){a(t).addClass("fadeOut animated")},150*o)})},success:function(a){s.html(a.html),i.removeClass("loading"),t(e),d.data("next-page",a.next_page).data("max-pages",a.max_pages).data("atts",a.atts),a.next_page>a.max_pages?d.hide():d.show(),i.hasClass("with-lightbox")&&o(i)}}),!1}),i.find(".ajax-pagination-button").click(function(){if(i.hasClass("loading"))return!1;var t=a(this),e=parseInt(t.data("max-pages")),r=parseInt(t.data("next-page")),l=r+1;return t.data("next-page",l),n(t,i,s,r,l,e),i.hasClass("with-lightbox")&&o(i),!1});var l=i.find(".pagination.style-infinite");l.length&&s.waitForImages({waitForAll:!0,finished:function(){var t=l.offset().top-a(window).height();a(window).scroll(function(){var e=parseInt(l.data("max-pages")),r=parseInt(l.data("next-page")),d=r+1;a(window).scrollTop()>=t&&0==l.hasClass("loading")&&r<=e&&(n(l,i,s,r,d,e),i.hasClass("with-lightbox")&&o(i))})}})})},window.wplab_albedo_portfolio_posts_init()}(window.jQuery);
