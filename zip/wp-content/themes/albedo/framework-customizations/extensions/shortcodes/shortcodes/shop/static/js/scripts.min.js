!function(a){"use strict";function n(n,t,e,o,i,s){a.ajax({url:wprotoEngineVars.ajaxurl,type:"POST",dataType:"json",data:{action:"wplab_albedo_ajax_query_posts",query_type:"load_more",atts:n.data("atts"),paged:o},beforeSend:function(){n.addClass("loading"),e.addClass("loading")},success:function(a){t.append(a.html),n.removeClass("loading"),e.removeClass("loading"),n.data("next-page",a.next_page),i>s&&n.hide()}})}window.wplab_albedo_shop_init=function(){var t=a(".shop-shortcode");t.length&&t.each(function(){var e=a(this),o=e.find(".pagination.style-infinite");o.length&&t.waitForImages({waitForAll:!0,finished:function(){var e=a("#"+o.data("posts-container-id")),i=o.offset().top-a(window).height();a(window).scroll(function(){var s=parseInt(o.data("max-pages")),d=parseInt(o.data("next-page")),l=d+1;a(window).scrollTop()>=i&&0==o.hasClass("loading")&&d<=s&&n(o,e,t,d,l,s)})}}),e.find(".ajax-pagination-button").click(function(){if(t.hasClass("loading"))return!1;var e=a(this),o=a("#"+e.data("posts-container-id")),i=parseInt(e.data("max-pages")),s=parseInt(e.data("next-page")),d=s+1;return e.data("next-page",d),n(e,o,t,s,d,i),!1})})},window.wplab_albedo_shop_init()}(window.jQuery);
